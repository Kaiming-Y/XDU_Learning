# 03 软件质量属性

质量属性的**含义**：

- 属于非功能性需求，并不被功能所决定
- 不同的软件项目，关注不同的质量属性
- 质量属性之间可能互相抑制
- 必须结合设计、实现、部署3方面才能满足

**质量属性场景**描述系统如何对刺激做出反应。

质量属性场景的6个**组成部分**：

- **刺激源（source）**：谁造成的刺激
- **刺激（stimulus）**：一个影响系统的情况
- **制品（artifact）**：系统被影响的部分
- **环境（environment）**：刺激发生时系统所处的状态
- **响应（response）**：刺激所产生的结果
- **响应衡量指标（response measure）**：如何评估响应





## I. 可用性 Availability

<img src="https://raw.githubusercontent.com/abecedarian007/picgo_images/master/img/20240612174837.png"/>

### 含义

- 定义
  - 当用户使用系统时，系统可用的概率
  - 提前确定的停机维护不计入

- <u>**关注点**：故障</u>
  - 是否发生了故障
  - 故障的后果
- 衡量指标
  - 可用时间百分比
  - 修复故障所需时间

<img src="https://raw.githubusercontent.com/abecedarian007/picgo_images/master/img/20240612111657.png" style="zoom:80%;" />

### 策略

<u>**目标**：降低故障造成的影响</u>

#### 1 故障检测

- ping/echo
  - 监控组件不定期向被监控组件发出ping消息，并根据收到的echo消息（是否收到、延时）做出响应

- 心跳
  - 被监控组件**定期**向监控组件发出心跳消息
  - 在节点间保持**周期性**的心跳信号以检测各个节点的状态。若连续未收到的心跳信号到了一定的数目，就认为相应的系统已经出现故障。

- 异常
  - 抛出 + 捕获 + 处理
  - 需要编程语言支持


#### 2 故障恢复

- 投票
  - 多个冗余的组件，用统一或不同的算法来完成同一个任务。如果计算结果不同，则**少数服从多数**

- 主动冗余
  - A、B服务器完成同样的运算（A和B的状态时刻保持一致），平时只取A算出的结果
  - 当A出现故障时，系统可以极快地切换到B

- 被动冗余
  - A服务器完成运算后的**一定时间内**把自身状态告知B，B再把自身状态更新为A的状态。
  - 当A出现故障时，首先需要确认B的状态是最新的。

- 内测
  - 开发人员修正bug，并在内部进行测试，确认无误后再发布补丁

- 检查点/回滚
  - 定期保存，便于恢复


#### 3 故障避免

- 服务下线
- 事务
- 进程监控





## II. 可修改性 Modifiability

<img src="https://raw.githubusercontent.com/abecedarian007/picgo_images/master/img/20240612174854.png"/>

### 含义

- <u>**关注点**：修改的成本</u>
  - 系统的哪些部分被修改
  - 修改发生的时间
  - 修改由谁来进行
- 衡量指标
  - 修改完成的时间
  - 修改所花的人力成本
  - 修改所花的经济成本

<img src="https://raw.githubusercontent.com/abecedarian007/picgo_images/master/img/20240612111742.png" style="zoom:80%;" />

### 策略

<u>**目标**：降低修改的时间和成本</u>

#### 1 限制修改范围

- 模块高内聚、低耦合
  - 尽量把对程序的修改控制在一个模块内
- 考虑到可能会发生的修改
  - 有助于评估模块间责任的划分
  - 让一个点的修改只影响一个模块，避免完全无关的多个修改会影响同一个模块
- 让模块通用
  - “解释器”风格的思路
- 隐藏信息
  - 面向对象机制中的可访问性（public/private）
- 维持接口不变
  - 在接口不变的情况下，接口连接的双方可以独立变化
- 限制通信路径
  - 设计模式的Facade模式
- 使用中介
  - 数据中介：共享数据的风格
  - 服务中介：设计模式种的bridge、factory method等模式
- 命名服务器（name server)
  - 查询所需资源 / 对象的位置，解决位置依赖
- 按需创建实例
  - 借助设计模式中的创建型模式（单例、工厂方法、抽象工厂、原型、建造者）

#### 2 延迟绑定时间

- 配置文件
  - 修改配置文件，而不用修改代码
- 发布-订阅模式
  - 设计模式中的“观察者模式”
- 多态
  - 用不同的子类，实现不同的功能





## III. 性能 Performance

<img src="https://raw.githubusercontent.com/abecedarian007/picgo_images/master/img/20240612174917.png"/>

### 含义

- <u>**关注点**：处理响应的速度</u>
- 事件的来源
  - 用户的请求
  - 本系统内不能
  - 本系统外部
- 事件到达模式
  - 随机的
  - 有特定时间尺度，有规律的

<img src="https://raw.githubusercontent.com/abecedarian007/picgo_images/master/img/20240612113133.png" style="zoom:80%;" />

### 策略

<u>**目标**：</u>

- <u>在限定时间内响应事件</u>
- <u>获取资源 + 使用资源</u>

#### 1 资源的需求

- 在要处理的数据量不变的情况下，提高计算效率
  - 使用更高效率的算法
  - 减少处理事件时对资源的占用
- 减少要处理的数据总量
  - 控制事件到来的速率
  - 只抽取一部分请求来处理
- 限制执行时间
  - 在规定时间内得到近似解
- 限制待处理事件队列长度
  - 直接放弃处理一部分事件

#### 2 资源的管理

- 利用并发机制
  - 多线程、多进程、多核、多机 ……
- 增加可用资源
  - 计算资源、存储资源、带宽资源 ……

#### 3 资源的仲裁

- 先来先服务
- 固定优先级调度
- 动态优先级调度





## IV. 安全性 Security

<img src="https://raw.githubusercontent.com/abecedarian007/picgo_images/master/img/20240612174933.png"/>

### 含义

- <u>**关注点**：尽量避免攻击对系统的影响</u>
  - 在保证合法用户使用系统的前提下，抵抗对系统的**攻击**
- 安全性的不同方面
  - 不可否认性
  - 私密性
  - 完整性
  - 保证性
  - 可用性

<img src="https://raw.githubusercontent.com/abecedarian007/picgo_images/master/img/20240612143843.png" style="zoom:80%;" />

### 策略

<u>**目的**：尽量避免攻击对系统的影响</u>

#### 1 抵抗攻击

- 用户的证实
  - 密码、验证码、生物识别 ……
- 用户的授权
  - 确认用户的操作是在其权限范围
- 维持数据的保密性
  - 给数据和传输过程加密
- 维持数据的完整性
  - MD5码校验
- 减少暴露
  - 关闭无用端口、自启动的服务、无线路由SSID等
- 限制访问
  - 白名单、黑名单

#### 2 检测攻击

- 软件和人结合
  - 入侵检测系统
  - 安全专家

#### 3 从攻击中恢复

- 恢复状态
  - 使用“可用性”中的相关策略
- 攻击者识别
  - 震慑潜在的攻击者





## V. 可测试性 Testability

<img src="https://raw.githubusercontent.com/abecedarian007/picgo_images/master/img/20240612174945.png"/>

### 含义

**软件测试是为了发现错误**

- <u>**关注点**：让软件的bug容易被测试出来</u>
  - 验证软件产品与它的需求规格是否匹配
  - 使用最小的成本和工作量来验证软件的质量
- 测试的重要性
  - 一般软件项目40%的成本花在测试上
  - 大型软件项目出现故障，可能导致严重的后果
  - 如果能在体系结构层面提高可测试性，收益巨大

<img src="https://raw.githubusercontent.com/abecedarian007/picgo_images/master/img/20240612144708.png" style="zoom:80%;" />

### 策略

<u>**目标**：让测试更轻松</u>

#### 1 黑盒测试

<u>**总体思路**：提供输入 + 捕获输出</u>

- 记录/回访
  - 自动化/半自动化测试
- 把接口和实现分离开
  - 不同的排序算法，使用相同的接口
- 提供专用的测试路径

#### 2 白盒测试

- 内部监控
  - IDE内置的断点等调试工具

#### 常用的测试工具

- Appium（APP UI测试）
- Selenium（Web UI测试）
- JMeter（接口测试、性能测试）





## VI. 易用性 Usability

<img src="https://raw.githubusercontent.com/abecedarian007/picgo_images/master/img/20240612174955.png"/>

### 含义

- <u>**关注点**：让用户使用软件的难度降低</u>

<img src="https://raw.githubusercontent.com/abecedarian007/picgo_images/master/img/20240612163440.png" style="zoom:80%;" />

### 策略

<u>**目标**：让用户轻松使用</u>

#### 1 运行时策略

- 系统猜测用户要完成的任务
  - 输入法联想、搜索引擎联想
- 系统给用户适当的反馈
  - 提示拷贝文件所需的剩余时间、浏览器打开页面的进度
- 系统给用户提供一致的体验
  - 鼠标提供DPI调整，适应不同的分辨率
- 支持撤销操作
  - 减少误操作的影响

#### 2 设计时策略

- 把用户界面和系统其他部分分离
  - MVC模式
  - 支持用户界面的独立修改





