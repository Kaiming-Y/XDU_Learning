# 05 软件体系结构评估





## 体系结构评估

### 定义

**体系结构评估**是一项开发生命周期活动，其中多个**项目干系人**使用**场景**等评估技术在**正式**或**非正式**的过程中**共同分析软件架构**

### why？

- 尽早发现现有架构的问题
  - 在生命周期中越早发现问题，修复它们的成本就越低。
- 需求验证
  - 架构评估揭示了冲突和权衡，并为协商解决方案提供了一个论坛
- 强制准备审查
  - 许多系统没有所有开发人员都能理解的架构。评估准备过程将揭示其中许多问题。
- 改进的架构

### 评估方法

#### **Scenario-based Architecture Analysis Method (SAAM)**

这可能是**第一个**有记录的软件架构分析方法，最初是为了分析架构的可修改性而开发的。但是，它对于分析架构的任何**非功能性方面**都很有用。它建立在使用**项目干系人生成的场景**来评估架构的基础上。

#### Architecture Trade-off Analysis Method (ATAM)

- 这是 **SAAM 的后继者**，也正在得到广泛使用。
- 该方法在架构分析中结合了**质量属性效用树**和质量属性类别。
- SAAM 没有明确解决质量属性之间的**相互作用**，而 ATAM 却解决了。因此，权衡点是针对**竞争质量属性**的。
- ATAM 是 SAAM 的专业化，特别关注**可修改性**、**性能**、**可用性**和**安全性**。

#### SAAM Founded on Complex Scenarios (SAAMCS)

该方法将评估场景的**复杂性**视为最重要的风险评估因素。

#### Extending SAAM by Integration in the Domain (ESAAMI)

该方法将 SAAM 与**特定领域**和**基于重用**的软件开发流程相结合。

#### Software Architecture Analysis Method for Evolution and Reusability (SAAMER)

该方法特别关注**演化**和**可重用性**的质量属性。

#### Scenario-Based Architecture Reengineering (SBAR)

该方法利用**场景**、**模拟**、**数学建模**和**基于经验的推理**来评估质量属性。该方法还结合了架构设计方法。

#### Architecture Level Prediction of Software Maintenance （ALPSM）

这是另一种使用场景分析**可维护性**的方法，称为变更场景，代表维护任务。

#### Software Architecture Evaluation Model (SAEM）

该方法基于**正式**且**严格**的质量要求。





## ATAM

### 概述

- ATAM 是一种帮助项目干系人提出正确问题以发现潜在问题架构决策的方法。

- **折衷 (Trade-off)** 可以明确识别和记录权衡利弊。

- 然后可以将发现的风险作为缓解活动的重点：例如进一步设计、进一步分析、原型设计。

### 目标

**目标**：发现架构决策造成的风险。

我们希望找到**趋势**：架构决策与系统属性预测之间的相关性。

### 好处

执行 ATAM 评估有很多好处：

- 识别风险
- 明确质量属性要求
- 改进架构文档
- 为架构决策提供记录基础
- 增加项目干系者之间的沟通

结果是架构得到改进。

### 评估阶段

<img src="https://raw.githubusercontent.com/abecedarian007/picgo_images/master/img/20240612194151.png" style="zoom:80%;" />

#### 阶段 0

> 此阶段先于技术评估

- 客户和评估团队的一个子集就需要评估其架构的方法和系统交换理解。
- 达成评估协议
- 核心评估团队登场

#### 阶段 1

> 专注于获取详细的体系结构信息并进行分析

- 涉及一小部分主要以技术为导向的项目干系者
- 以架构为中心
- 自上而下分析

##### 1. 评估小组给出 ATAM 概述

- 技术
  - **效用树**生成
  - 架构引出与分析
  - 场景头脑风暴/映射
- 输出
  - 架构方法
  - 效用树和场景
  - 风险、非风险、敏感点和权衡

##### 2. 客户描述系统的业务驱动因素

- 系统的业务环境
- 高级功能要求
- 高级质量属性要求

##### 3. 设计师展示了架构设计的概述

- 规定使用的技术限制，例如操作系统、硬件或中间件
- 系统必须与之交互的其他系统
- 用于满足质量属性要求的架构方法

##### 4. 确定核心架构方法

评估人员开始确定架构中实现质量属性目标的关键位置。

##### 5. 通过构建效用树来识别、确定优先级并细化最重要的质量属性目标

- 重要的构架信息
  - 上下文图：系统所处的上下文环境；与系统有交互的人或其他系统
  - 模块或分层视图：描述系统功能分解的模块（可能是子系统或分层），加上对象，过程，函数及其关系（如过程调用，方法调用，回调，包含等）
  - 组件-连接件视图：进程，同步的线程，数据流，连接事件等
  - 配置视图：CPUs，存储，外设，传感器网络，通信设备，及在各处理器上运行的进程
- 构架方法、模式或采用的战术，包括它们实现了什么质量属性及这些方法如何实现这些属性的描述
- 通过构建**效用树**来识别、优先排序和细化最重要的质量属性目标

##### 6. 评估团队从具体质量属性的角度探究架构方法，以识别风险

- 确定架构方法
- 针对最高优先级场景询问质量属性具体问题
- 识别并记录**风险**和**非风险**、**敏感点**和**权衡点**

#### 阶段 2

- 涉及更大范围的利益相关者
- 以利益相关者为中心
- 专注于引出不同利益相关者的观点和验证第一阶段的结果。

##### 7. 利益相关者通过便利的头脑风暴过程生成各种场景

效用树叶上的场景可作为示例来促进该步骤。

##### 8. 确定上一步生成的场景所影响的架构方法。

- 此步骤使用新场景继续第 6 步开始的分析。
- 继续识别风险和非风险。
- 继续注释架构信息。

##### 9. 概括 ATAM 的所有步骤并展示 ATAM 的输出

- 体系结构方法
- 效用树
- 场景
- 风险和无风险
- 敏感点和权衡点
- 风险主题

#### 阶段 3

主要涉及为客户制作**最终报告**以及反思评估和 ATAM 材料的质量

<img src="https://raw.githubusercontent.com/abecedarian007/picgo_images/master/img/20240612202324.png" style="zoom: 60%;" />



### 评估

#### 敏感点 Sensitivities

**敏感点**是一个或多个组件（和/或组件关系）的属性，对于实现特定质量属性响应至关重要。

#### 权衡点 Tradeoffs

**权衡点**是影响多个属性的属性，也是多个属性的敏感点。

#### 风险决策 Risks 

**风险**是一种可能存在问题的架构决策。

#### 无风险决策 Non-Risks

**非风险**是经过分析后被认为是安全的良好架构决策。



## 效用树 Utility Tree

效用树是一个**自顶向下**的工具，用来刻画重要的需求。

<img src="https://raw.githubusercontent.com/abecedarian007/picgo_images/master/img/20240612195420.png"/>

- 驱动**质量属性**是高级节点（通常是性能、可修改性、安全性和可用性）
- **场景**是效用树的叶子。
- 输出：<u>**特定质量属性**的**特征**</u>和**<u>优先级</u>**



> 关于优先级：
>
> - H = high
> - M = medium
> - L = Low
>
> (X, Y) = (因素的重要性， 实现的风险)





